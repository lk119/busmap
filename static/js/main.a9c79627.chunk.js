(this.webpackJsonpbusmap=this.webpackJsonpbusmap||[]).push([[0],{139:function(e,t){},179:function(e,t,i){},200:function(e,t){},203:function(e,t,i){"use strict";i.r(t);var r=i(2),n=i.n(r),c=i(110),l=i.n(c),o=(i(179),i(17)),a=i(165),d=i(223),s=i(218),u=i(225),p=i(161),b=i(227),f=i(8),h=(Object.assign,"https://raw.githubusercontent.com/lk119/busmap/main/data/simd_test.json"),j="https://raw.githubusercontent.com/lk119/busmap/main/data/bus_data.json",m="https://raw.githubusercontent.com/lk119/busmap/main/data/routes_data.json",g="https://raw.githubusercontent.com/lk119/busmap/main/data/grid.json",v="https://raw.githubusercontent.com/lk119/busmap/main/data/bus_stops.json",x="mapbox://styles/mapbox/dark-v10",O=["dec19_decile","mar20_decile","dec19_time","mar20_time","longer_decile","shorter_decile","longer_time","shorter_time","all_time","all_decile","simd_only"],_=["routes_decile"],k=["routes_time"],C=["stops"],y=["simd_outline"],w=["simd_fill"],S=Object(b.a)().domain([1,2,3,4,5,6,7,8,9,10]).range([[255,201,4],[255,224,0],[255,166,0],[255,142,31],[255,117,51],[255,93,68],[252,68,85],[239,45,100],[221,24,115],[199,14,128]]),M=(Object(b.a)().domain([-1e3,-300,-30,0,30,300,600,1500]).range([[49,209,212],[0,193,221],[0,176,232],[0,157,242],[0,136,246],[0,112,241],[0,81,225],[100,33,196]]),Object(b.a)().domain([0,30,60,90,120,180,300,1550]).range([[0,136,246],[14,125,242],[33,113,238],[49,101,232],[64,87,225],[77,73,216],[89,56,207],[100,33,196]])),D=Object(b.a)().domain([-1500,-300,-180,-120,-90,-60,-30,0]).range([[17,214,209],[0,206,219],[0,197,230],[0,187,239],[0,176,247],[0,164,251],[0,151,251],[0,136,246]]),E=Object(b.a)().domain([-1500,-300,-180,-120,-90,-60,-30,-10,10,30,60,90,120,180,300,1550]).range([[17,214,209],[0,206,219],[0,197,230],[0,187,239],[0,176,247],[0,164,251],[0,151,251],[0,136,246],[0,136,246],[14,125,242],[33,113,238],[49,101,232],[64,87,225],[77,73,216],[89,56,207],[100,33,196]]),L=Object(b.a)().domain([-1500,-10,10,1550]).range([[17,214,209],[0,176,247],[49,101,232],[100,33,196]]),F=Object(b.a)().domain([0,100,200,300,400,500,800,1600]).range([[17,214,209],[0,197,230],[0,176,247],[0,151,251],[14,125,242],[49,101,232],[77,73,216],[100,33,196]]),I={longitude:-3.1883,latitude:55.9533,zoom:11,pitch:45,bearing:0,maxZoom:16};new p.a({color:[255,255,255],intensity:1});function T(e){var t=e.object;return t&&{html:"  <div><b>Edinburgh Bus Map</b></div>\n  <div>".concat(t.properties.decile," / SIMD decile</div>\n  <div><b>Minutes difference between Dec 19 and Mar 20</b></div>\n  <div>").concat((Math.floor(t.properties.difference)/60).toFixed(2)," minutes</div>\n\n  ")}}function B(e){var t=e.simd,i=void 0===t?h:t,n=e.bus,c=void 0===n?j:n,l=e.routes,p=void 0===l?m:l,b=e.grid,B=void 0===b?g:b,P=(e.roads,e.busstops),W=void 0===P?v:P,z=(e.mapStyle,Object(r.useState)(I)),N=Object(o.a)(z,2),R=(N[0],N[1]),H=Object(r.useState)(""),A=Object(o.a)(H,2),G=A[0],J=A[1],Q=Object(r.useState)(!1),V=Object(o.a)(Q,2),Y=V[0],X=V[1],Z=Object(r.useState)(!1),q=Object(o.a)(Z,2),K=q[0],U=q[1],$=Object(r.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ie=ee[1],re=Object(r.useState)(!1),ne=Object(o.a)(re,2),ce=ne[0],le=ne[1],oe=Object(r.useState)(!1),ae=Object(o.a)(oe,2),de=ae[0],se=ae[1],ue={dec19_decile:"",mar20_decile:"",dec19_time:"",mar20_time:"",routes_decile:"",routes_time:"",stops:"",longer_decile:"",shorter_decile:"",longer_time:"",shorter_time:"",all_decile:"",all_time:"",similar:"",simd_only:"",simd_outline:"",simd_fill:""};O.forEach((function(e){G===e&&(ue[e]=!0)})),_.forEach((function(e){!0===Y&&(ue[e]=!0)})),k.forEach((function(e){!0===K&&(ue[e]=!0)})),C.forEach((function(e){!0===te&&(ue[e]=!0)})),y.forEach((function(e){!0===ce&&(ue[e]=!0)})),w.forEach((function(e){!0===de&&(ue[e]=!0)}));var pe=[new s.a({id:"simd_fill_faded",data:i,filled:!0,extruded:!1,getPolygon:function(e){return e.polygon},getFillColor:function(e){return S(e.decile)},getLineColor:function(e){return S(e.decile)},getLineWidth:5,opacity:.01,visible:ue.simd_fill}),new s.a({id:"simd_outline_thin",data:i,filled:!1,extruded:!1,getPolygon:function(e){return e.polygon},getLineColor:function(e){return S(e.decile)},getLineWidth:10,opacity:1,visible:ue.simd_outline}),new u.a({id:"routes-time",data:p,pickable:!0,stroked:!1,filled:!0,lineWidthScale:20,lineWidthMinPixels:2,getFillColor:function(e){return L(e.properties.difference)},getLineColor:function(e){return L(e.properties.difference)},getLineWidth:1,visible:ue.routes_time}),new u.a({id:"routes-decile",data:p,pickable:!0,stroked:!1,filled:!0,pointType:"circle",lineWidthScale:20,lineWidthMinPixels:2,getFillColor:function(e){return S(e.properties.decile)},getLineColor:function(e){return S(e.properties.decile)},getPointRadius:100,getLineWidth:1,visible:ue.routes_decile}),new u.a({id:"stops",data:W,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getFillColor:[47,241,245,200],getLineColor:[47,241,245,200],getRadius:10,radiusMinPixels:10,radiusScale:10,visible:ue.stops}),new u.a({id:"longer_decile",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference>10?Math.floor(e.properties.difference/60):0},elevationScale:200,getFillColor:function(e){return e.properties.difference>10?S(e.properties.decile):[255,255,255,1]},getLineColor:function(e){return e.properties.difference>10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.longer_decile}),new u.a({id:"shorter_decile",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference<-10?Math.floor(e.properties.difference/60*-1):0},elevationScale:200,getFillColor:function(e){return e.properties.difference<-10?S(e.properties.decile):[255,255,255,1]},getLineColor:function(e){return e.properties.difference<-10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.shorter_decile}),new u.a({id:"longer_time",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference>10?Math.floor(e.properties.difference/60):0},elevationScale:200,getFillColor:function(e){return e.properties.difference>10?M(e.properties.difference):[255,255,255,1]},getLineColor:function(e){return e.properties.difference>10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.longer_time}),new u.a({id:"shorter_time",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference<-10?Math.floor(e.properties.difference/60*-1):0},elevationScale:200,getFillColor:function(e){return e.properties.difference<-10?D(e.properties.difference):[255,255,255,1]},getLineColor:function(e){return e.properties.difference<-10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.shorter_time}),new u.a({id:"all_decile1",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference>10?Math.floor(e.properties.difference/60):0},elevationScale:200,getFillColor:function(e){return e.properties.difference>10?S(e.properties.decile):[255,255,255,1]},getLineColor:function(e){return e.properties.difference>10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.all_decile}),new u.a({id:"all_decile2",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference<-10?Math.floor(e.properties.difference/60*-1):0},elevationScale:200,getFillColor:function(e){return e.properties.difference<-10?S(e.properties.decile):[255,255,255,1]},getLineColor:function(e){return e.properties.difference<-10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.all_decile}),new u.a({id:"all_time1",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference>10?Math.floor(e.properties.difference/60):0},elevationScale:200,getFillColor:function(e){return e.properties.difference>10?E(e.properties.difference):[255,255,255,1]},getLineColor:function(e){return e.properties.difference>10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.all_time}),new u.a({id:"all_time2",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return e.properties.difference<-10?Math.floor(e.properties.difference/60*-1):0},elevationScale:200,getFillColor:function(e){return e.properties.difference<-10?E(e.properties.difference):[255,255,255,1]},getLineColor:function(e){return e.properties.difference<-10?[220,220,220]:[169,169,169,100]},pickable:!0,visible:ue.all_time}),new u.a({id:"dec19_decile",data:c,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return Math.floor(e.properties.average_december/60)},elevationScale:40,getFillColor:function(e){return S(e.properties.simd_decile)},getLineColor:[220,220,220],pickable:!0,visible:ue.dec19_decile}),new u.a({id:"invisible_dec_decile",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,getElevation:2e3,getFillColor:[255,255,255,0],getLineColor:[255,255,255,0],pickable:!0,visible:ue.dec19_decile}),new u.a({id:"mar20_decile",data:c,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return Math.floor(e.properties.average_march/60)},elevationScale:40,getFillColor:function(e){return S(e.properties.simd_decile)},getLineColor:[2220,220,220],pickable:!0,visible:ue.mar20_decile}),new u.a({id:"invisible_mar_decile",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,getElevation:2e3,getFillColor:[255,255,255,0],getLineColor:[255,255,255,0],pickable:!0,visible:ue.mar20_decile}),new u.a({id:"dec19_time",data:c,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return Math.floor(e.properties.average_december/60)},elevationScale:40,getFillColor:function(e){return e.properties.average_december>0?F(e.properties.average_december):[255,255,255,1]},getLineColor:[220,220,220],pickable:!0,visible:ue.dec19_time}),new u.a({id:"invisible_dec_time",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,getElevation:2e3,getFillColor:[255,255,255,0],getLineColor:[255,255,255,0],pickable:!0,visible:ue.dec19_time}),new u.a({id:"mar20_time",data:c,opacity:1,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return Math.floor(e.properties.average_march/60)},elevationScale:40,getFillColor:function(e){return e.properties.average_march>0?F(e.properties.average_march):[255,255,255,1]},getLineColor:[220,220,220],pickable:!0,visible:ue.mar20_time}),new u.a({id:"invisible_mar_time",data:B,opacity:1,stroked:!1,filled:!0,extruded:!0,getElevation:2e3,getFillColor:[255,255,255,0],getLineColor:[255,255,255,0],pickable:!0,visible:ue.mar20_time})];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(d.a,{layers:pe,initialViewState:I,controller:!0,getTooltip:T,onViewStateChange:function(e){R(e.viewState)},children:[Object(f.jsx)(a.a,{mapboxApiAccessToken:"pk.eyJ1IjoiYmluemllIiwiYSI6ImNrcDcwbmI1dzB3MnoycHF0eXQ0czQ0MTMifQ.FNw2f1X8Olzz1NuTGNMaiw",mapStyle:x})," "]}),Object(f.jsxs)("div",{id:"control-panel",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:Object(f.jsx)("b",{children:"Edinburgh City Buses"})}),Object(f.jsx)("p",{children:"Comparing December 2019 and March 2020 Lothian bus journey times across SIMD zones."})]}),Object(f.jsx)("div",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"HINT: "})," Hold down shift and click to rotate map"]})}),Object(f.jsxs)("div",{class:"layers",children:[Object(f.jsx)("h2",{children:"LAYERS"}),Object(f.jsx)("div",{class:"toggles",children:Object(f.jsxs)("div",{class:"button-toggles",children:[Object(f.jsx)("label",{children:" Clear Grid Layers "}),Object(f.jsx)("input",{id:"clear-layers",name:"month",type:"radio",value:"",checked:""===G,onChange:function(e){J(e.target.value)}})," "]})}),Object(f.jsxs)("div",{class:"button-toggles",children:[Object(f.jsx)("label",{children:"SIMD Fill"}),Object(f.jsx)("input",{id:"simd_fill",name:"simd_fill",type:"checkbox",defaultChecked:de,onChange:function(e){se(!de)}})," "]}),Object(f.jsxs)("div",{class:"button-toggles",children:[Object(f.jsx)("label",{children:"SIMD Outline"}),Object(f.jsx)("input",{id:"simd_outline",name:"simd_outline",type:"checkbox",defaultChecked:ce,onChange:function(e){le(!ce)}})," "]}),Object(f.jsxs)("div",{class:"button-toggles",children:[Object(f.jsx)("label",{children:" Bus Stops"}),Object(f.jsx)("input",{id:"stops",name:"stops",type:"checkbox",defaultChecked:te,onChange:function(e){ie(!te)}})," "]}),Object(f.jsxs)("div",{class:"button-toggles",children:[Object(f.jsx)("label",{children:" Routes by Decile"}),Object(f.jsx)("input",{id:"routes-decile",name:"routes-decile",type:"checkbox",defaultChecked:Y,onChange:function(e){X(!Y)}})," "]}),Object(f.jsxs)("div",{class:"button-toggles",children:[Object(f.jsx)("label",{children:" Routes by Time"}),Object(f.jsx)("input",{id:"routes-time",name:"routes-time",type:"checkbox",defaultChecked:K,onChange:function(e){U(!K)}})," "]}),Object(f.jsx)("h3",{children:"TOTAL TIME"}),Object(f.jsx)("p",{children:"Height represents the sum of total minutes buses spent in a grid cell."}),Object(f.jsxs)("div",{class:"container1",children:[Object(f.jsx)("h4",{children:"December 2019:"}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By SIMD Decile"}),Object(f.jsx)("input",{id:"dec19_decile",name:"month",type:"radio",value:"dec19_decile",checked:"dec19_decile"===G,onChange:function(e){J(e.target.value)}})," "]}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By Time"}),Object(f.jsx)("input",{id:"dec19_time",name:"month",type:"radio",value:"dec19_time",checked:"dec19_time"===G,onChange:function(e){J(e.target.value)}})," "]})]}),Object(f.jsxs)("div",{class:"container2",children:[Object(f.jsx)("h4",{children:"March 2020:"}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By SIMD Decile"}),Object(f.jsx)("input",{id:"mar20_decile",name:"month",type:"radio",value:"mar20_decile",checked:"mar20_decile"===G,onChange:function(e){J(e.target.value)}})," "]}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By Time"}),Object(f.jsx)("input",{id:"mar20_time",name:"month",type:"radio",value:"mar20_time",checked:"mar20_time"===G,onChange:function(e){J(e.target.value)}})," "]})]}),Object(f.jsxs)("div",{class:"difference-view",children:[Object(f.jsx)("h3",{children:"TIME DIFFERENCE"}),Object(f.jsx)("p",{children:"Height represents the difference in minutes buses spent in a grid cell between December 2019 and March 2020."}),Object(f.jsx)("h4",{children:"View all time differences (shorter and longer):"}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By SIMD Decile"}),Object(f.jsx)("input",{id:"grid",name:"month",type:"radio",value:"all_decile",checked:"all_decile"===G,onChange:function(e){J(e.target.value)}})," "]}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By Time"}),Object(f.jsx)("input",{id:"grid",name:"month",type:"radio",value:"all_time",checked:"all_time"===G,onChange:function(e){J(e.target.value)}})," "]}),Object(f.jsxs)("div",{class:"container1",children:[Object(f.jsx)("h4",{children:"Shorter in March:"}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By SIMD Decile"}),Object(f.jsx)("input",{id:"grid",name:"month",type:"radio",value:"shorter_decile",checked:"shorter_decile"===G,onChange:function(e){J(e.target.value)}})," "]}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By Time"}),Object(f.jsx)("input",{id:"grid",name:"month",type:"radio",value:"shorter_time",checked:"shorter_time"===G,onChange:function(e){J(e.target.value)}})," "]})]}),Object(f.jsxs)("div",{class:"container2",children:[Object(f.jsx)("h4",{children:"Longer in March:"}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By SIMD Decile"}),Object(f.jsx)("input",{id:"grid",name:"month",type:"radio",value:"longer_decile",checked:"longer_decile"===G,onChange:function(e){J(e.target.value)}})," "]}),Object(f.jsxs)("div",{class:"button",children:[Object(f.jsx)("label",{children:"By Time"}),Object(f.jsx)("input",{id:"grid",name:"month",type:"radio",value:"longer_time",checked:"longer_time"===G,onChange:function(e){J(e.target.value)}})," "]})]})]})]}),Object(f.jsxs)("div",{id:"legend-container",children:[Object(f.jsx)("h3",{children:"SIMD Deciles:"})," ",Object(f.jsx)("img",{src:"/busmap/legend.png",alt:"SIMD colour scale",style:{height:"30px",width:"95%"}}),Object(f.jsx)("p",{children:"Where 1 is the most deprived 10% of the Scottish population and 10 is the least deprived 10% of the Scottish population."}),Object(f.jsx)("h3",{children:"Time Difference:"})," ",Object(f.jsx)("img",{src:"/busmap/legend_time.png",alt:"Time difference colour scale",style:{height:"30px",width:"95%"}})]}),Object(f.jsxs)("div",{class:"data-links",children:[Object(f.jsxs)("div",{class:"date-ranges",children:[Object(f.jsx)("h6",{children:"Bus GPS data date ranges:"}),Object(f.jsx)("p",{children:"10 December 2019 00:00:00 to 20 December 2019 23:59:59"}),Object(f.jsx)("p",{children:"10 March 2020 00:00:00 to 20 March 2020 23:59:59"})]}),Object(f.jsx)("h5",{children:" Bus Data Source:  "})," ",Object(f.jsx)("a",{href:"https://tfe-opendata.readme.io/",children:"  Transport for Edinburgh Open Data"}),Object(f.jsx)("h5",{children:" SIMD Data Source:  "})," ",Object(f.jsx)("a",{href:"https://www.spatialdata.gov.scot/geonetwork/srv/eng/catalog.search#/metadata/02866b0b-66e5-46ab-9b1c-d433dc3c2fae",children:"  Scottish Spatial Data"})," "]})]})]})}var P=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,229)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,l=t.getTTFB;i(e),r(e),n(e),c(e),l(e)}))};l.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(B,{})}),document.getElementById("root")),P()}},[[203,1,2]]]);
//# sourceMappingURL=main.a9c79627.chunk.js.map